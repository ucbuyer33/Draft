<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Calculator</title>
  <style>
    body {
      font-family: Arial;
      background: #f0f0f0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh
    }

    .calculator {
      background: #fff;
      border: 2px solid #ccc;
      border-radius: 10px;
      padding: 20px;
      width: 280px;
      position: relative;
    }

    .display {
      width: 100%;
      height: 50px;
      font-size: 22px;
      text-align: right;
      margin-bottom: 10px;
      padding: 5px;
      box-sizing: border-box;
      position: relative;
    }

    /* live result on the left */
    #live {
      position: absolute;
      left: 30px;
      top: 28px;
      font-size: 16px;
      color: #aaa;
      pointer-events: none;
    }

    .buttons {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      grid-template-rows: repeat(5, 60px);
      gap: 10px
    }

    button {
      font-size: 18px;
      cursor: pointer;
      border-radius: 5px;
      border: none
    }

    .number {
      background: #e6e6e6
    }

    .operator {
      background: #4CAF50;
      color: #fff
    }

    .clear {
      background: #f44336;
      color: #fff
    }

    .equals {
      background: #2196F3;
      color: #fff;
      grid-row: span 2;
      grid-column: 4
    }

    .zero {
      grid-column: span 2
    }
  </style>
</head>

<body>
  <div class="calculator">
    <!-- main display -->
    <input id="display" class="display" readonly>
    <!-- ghosted live result (now on left) -->
    <div id="live"></div>

    <div class="buttons">
      <button class="clear" onclick="clearDisplay()">C</button>
      <button class="operator" onclick="addValue('/')">/</button>
      <button class="operator" onclick="addValue('*')">*</button>
      <button class="operator" onclick="delLast()">âŒ«</button>
      <button class="number" onclick="addValue('7')">7</button>
      <button class="number" onclick="addValue('8')">8</button>
      <button class="number" onclick="addValue('9')">9</button>
      <button class="operator" onclick="addValue('-')">-</button>
      <button class="number" onclick="addValue('4')">4</button>
      <button class="number" onclick="addValue('5')">5</button>
      <button class="number" onclick="addValue('6')">6</button>
      <button class="operator" onclick="addValue('+')">+</button>
      <button class="number" onclick="addValue('1')">1</button>
      <button class="number" onclick="addValue('2')">2</button>
      <button class="number" onclick="addValue('3')">3</button>
      <button class="equals" onclick="calc()">=</button>
      <button class="number zero" onclick="addValue('0')">0</button>
      <button class="number" onclick="addValue('.')">.</button>
    </div>
  </div>

  <script>
    let d = document.getElementById("display"),
        live = document.getElementById("live"),
        ops = ["+", "-", "*", "/"];

    function addValue(v) {
      if (d.value === "Error") { d.value = ""; live.textContent = ""; }
      let last = d.value.slice(-1);
      for (let i = 0; i < ops.length; i++) {
        if (v == ops[i]) { for (let j = 0; j < ops.length; j++) { if (last == ops[j]) return; } }
      }
      if (v == ".") {
        let parts = d.value.split(/[-+*/]/);
        if (parts[parts.length - 1].includes(".")) return;
      }
      d.value += v;
      showLive();
    }

    function clearDisplay() { d.value = ""; live.textContent = ""; }
    function delLast() { d.value = d.value.slice(0, -1); showLive(); }

    function calc() {
      try {
        if (d.value == "") return;
        d.value = new Function("return " + d.value)();
        live.textContent = "";
      } catch { d.value = "Error"; live.textContent = ""; }
    }

    function showLive() {
      try {
        if (d.value === "") { live.textContent = ""; return; }
        live.textContent = new Function("return " + d.value)();
      } catch { live.textContent = ""; }
    }

    // Keyboard support
    document.addEventListener("keydown", e => {
      if (!isNaN(e.key) || ops.includes(e.key) || e.key === ".") {
        addValue(e.key);
      } else if (e.key === "Enter") {
        calc();
      } else if (e.key === "Backspace") {
        delLast();
      } else if (e.key === "Escape") {
        clearDisplay();
      }
    });
  </script>
</body>

</html>
